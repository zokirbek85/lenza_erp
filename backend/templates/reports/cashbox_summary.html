{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:'uz' }}">
  <head>
    <meta charset="UTF-8" />
    <title>{% trans 'Cashbox Balance Summary' %}</title>
    <style>
      @page { size: A4; margin: 2cm; }
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; font-size: 11pt; color: #111827; }
      h1 { text-align: center; margin: 10px 0 16px; color: #0f172a; font-size: 18pt; }
      .header { display: flex; align-items: center; gap: 12px; justify-content: flex-start; margin-bottom: 10px; }
      .logo { height: 40px; }
      .company-block { display:flex; flex-direction:column; }
      .company-name { font-weight: 700; font-size: 14pt; color: #0f172a; }
      .company-slogan { font-size: 10pt; color: #6b7280; }
      .company-contact { font-size: 9pt; color: #6b7280; }
      .meta { font-size: 10pt; color: #374151; margin-bottom: 16px; }
      table { width: 100%; border-collapse: collapse; margin-top: 10px; }
      th, td { border: 1px solid #e5e7eb; padding: 6px 8px; text-align: left; }
      th { background: #f3f4f6; color: #111827; }
      .numeric { text-align: right; }
      tfoot td { font-weight: bold; border-top: 2px solid #111827; }
      .muted { color: #6b7280; }
      .footer { margin-top: 16px; text-align: center; font-size: 10px; color: #777; border-top: 1px solid #e5e7eb; padding-top: 12px; }
    </style>
  </head>
  <body>
    <div class="header">
      <img src="{{ company_logo }}" class="logo"/>
      <div class="company-block">
        <div class="company-name">{{ company_name }}</div>
        <div class="company-slogan">{{ company_slogan }}</div>
        <div class="company-contact">{{ company_address }}{% if company_phone %} | {{ company_phone }}{% endif %}</div>
      </div>
    </div>

    <h1>ðŸ’° {% trans 'Cashbox Balance Summary' %}</h1>
    <p class="meta">{% trans 'Generated at' %}: {{ generated_at|date:"d.m.Y H:i" }}</p>
    
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>{% trans 'Cashbox Type' %}</th>
          <th>{% trans 'Name' %}</th>
          <th>{% trans 'Currency' %}</th>
          <th class="numeric">{% trans 'Opening Balance' %}</th>
          <th class="numeric">{% trans 'Incomes' %}</th>
          <th class="numeric">{% trans 'Expenses' %}</th>
          <th class="numeric">{% trans 'Current Balance' %}</th>
        </tr>
      </thead>
      <tbody>
        {% for cb in cashboxes %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ cb.cashbox_type }}</td>
          <td>{{ cb.name }}</td>
          <td>{{ cb.currency }}</td>
          <td class="numeric">{{ cb.opening_balance|floatformat:2 }}</td>
          <td class="numeric">{{ cb.income_sum|floatformat:2 }}</td>
          <td class="numeric">{{ cb.expense_sum|floatformat:2 }}</td>
          <td class="numeric"><strong>{{ cb.balance|floatformat:2 }}</strong></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="muted">{% trans 'No cashbox data available' %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="footer">
      <p>{% trans 'Generated by' %}: <strong>{{ company_name }}</strong> {% trans 'System' %}</p>
    </div>
  </body>
</html>
